const setDirection = (cur, turn) => {

    if (turn == 0) {

        if (cur == '>') {
            return '^';
        } else if (cur == '^') {
            return '<';
        } else if (cur == '<') {
            return 'v';
        } else {
            return '>';
        }

    } else if (turn == 1) {

        return cur;

    } else {

        if (cur == '>') {
            return 'v';
        } else if (cur == '^') {
            return '>';
        } else if (cur == '<') {
            return '^';
        } else {
            return '<';
        }

    }

};

// Note: after pasting your input down there , change all \ to \\ using replace
// in your code editor (be sure NOT to change the last 5 found by search as they are part of the algorithm)
// Make sure to get the spaces correct!

const input = `                                                /-----------------------------------------------------------------\\                                   
                                                |    /------------------------------\\                             |                                   
       /----------------------------------------+----+------------------------------+----------------------------\\|                                   
       |     /---------------------->-----------+----+--\\     /---------------------+----------------------------++------------------------------\\    
       |     |                             /----+----+--+-----+---------------------+----------------------------++-------\\                      |    
       | /---+-----------------------------+----+----+--+-----+---------------------+--------------\\             ||       |                      |    
       | | /-+-----------------------------+----+----+--+-----+----------------\\  /-+--------------+-------------++-------+-----\\                |    
       | | | |     /-----------------------+----+----+--+--\\  |                |  | |             /+-------------++-------+-----+\\               |    
       | | | |     |                       |    |    |  |  |  |                |  | |     /-------++-------<-----++-------+-----++--\\            |    
   /---+-+-+-+-----+---------------\\       |  /-+----+--+--+--+----------------+--+-+-----+-------++-------------++-------+-----++--+------------+\\   
   |   | | | |     |               |      /+--+-+----+--+--+--+----------------+--+-+-----+-------++-------------++-------+-----++--+------------++--\\
   |   | | | |     |               |      ||  | |   /+--+--+--+---------\\ /----+--+-+-----+-------++-------------++--\\    |     ||  |            ||  |
   |   | | | |     |               |      ||  | |   ||/-+--+--+---------+-+----+--+-+-----+-------++-------------++--+----+---\\ ||  |            ||  |
   |   | | | |     |               |      ||  | |   |\\+-+--+--+---------+-+----+--+-/     |       ||             ||  |    |   | ||  |            ||  |
   | /-+-+-+-+-----+---------------+------++--+-+---+-+\\|  |  |         | |/---+--+-------+-------++-----------\\ ||  |    |   | ||  |            ||  |
   | | | | | |     |  /----------\\ |      ||  | |   | |||  |  |         | v|   |  |       |       ||           | ||  |    |   | ||  |            ||  |
   | | | | | |     | /+----------+\\|      ||  | |   | |||  |  |        /+-++---+--+-------+-------++-----------+-++-\\|    |   | ||  |            ||  |
   | | | | | \\-----+-++----------+++------++--+-+---+-++/  |  |/-------++-++---+--+-------+-------++---\\       | || ||    |   | ||  |            ||  |
   | | | | |     /-+-++----------+++------++--+-+---+-++---+--++-------++-++---+--+---\\   |       ||   |       | || ||    |   | ||  |            ||  |
   | | | | |     | | ||          |||      ||  | |   | || /-+--++-----\\ || ||   |  |   |   |       ||   |       | || ||    |   | ||  |            ||  |
   | | | | |     | | ||         /+++------++--+-+---+-++-+-+--++-----+-++-++---+--+---+---+-\\     ||   |       | || ||    |   | ||  |            ||  |
   | | | | |     | | ||     /---++++-\\ /--++--+-+---+-++-+-+--++-----+-++-++---+--+---+---+-+-----++---+-------+-++-++----+---+-++--+------------++\\ |
   | | | | |     | | ||     |   |||| | |  ||  | |   | || | |  ||     | || ||   |  |   |   | |     ||   |       | || ||    |/--+-++--+----------\\ ||| |
   | | | | |     | | || /---+---++++-+-+--++-\\| |   | || | |  ||     | ||/++---+->+---+---+-+-\\   ||   |       | || ||    ||  | ||  |          | ||| |
   | | | | |     | | || |   |   |||| | |  || || |   | || | |  ||/----+-+++++---+--+---+---+-+-+---++---+-------+-++-++----++--+-++--+-----\\    | ||| |
   | | | | |     | | || |   |   |||| | |  || || |   | || | |  |||    | \\++++---+--+---+---+-+-+---++---+-------+-++-/|    ||  | ||  |     |    | ||| |
   \\-+-+-+-+-----+-+-++-+---+---+++/ | |  \\+-++-+---+-++-+-+--+++----+--++++---+--+---+---+-+-+---++---+-------+-++--+----++--+-++--+-----+----+-+++-/
   /-+-+-+-+-----+-+-++-+---+---+++--+-+---+-++-+---+-++-+-+--+++----+--++++---+--+---+---+-+-+---++---+-\\     | ||  |    ||  | ||  |     |    | |||  
   | | | | |     | | || |   |   |||  | |   | || |   | || | |/-+++----+--++++---+--+---+---+-+-+---++---+-+-----+-++--+---\\||  | ||  |     |    | |||  
   | | | | |     | | || |   |   ||| /+-+---+-++-+---+-++-+-++-+++----+--++++---+--+---+---+-+-+---++---+-+-----+-++--+---+++--+-++--+---\\ |    | |||  
   | | | | |     | | || |   |   ||| || |  /+-++-+---+-++-+-++-+++----+--++++---+--+---+---+-+-+---++---+-+-----+-++--+---+++--+-++--+\\  | |    | |||  
   | | | | |     \\-+-++-+---+---+++-++-+--++-++-+---+-++-+-++-+++----+--++++---+--+---/   | | |   ||   | | /---+-++--+---+++--+-++--++--+-+---\\| |||  
   | | | | |       |/++-+---+---+++-++-+--++-++-+---+-++-+-++-+++----+--++++---+--+-----\\ | | |   \\+---+-+-+---+-++--+---+++--+-+/  ||  | |   || |||  
   | |/+-+-+-------++++-+--\\|   ||| || |  |\\-++-+---+-++-+-++-+++----+--++++---+--+-----+-+-+-+----+---+-+-+---+-++--+---+/|  | |   ||  | |   || |||  
   | ||| | |    /--++++-+--++---+++-++-+--+--++-+---+-++-+-++-+++----+--++++---+--+-----+-+-+-+----+-\\ | | |   | ||  |   | |  | |   ||  | |   || |||  
   | ||| | |    |  |||| |  ||   ||| || |  |/-++-+---+-++-+-++-+++----+--++++---+--+-----+-+-+-+----+-+-+-+-+---+-++--+---+-+--+-+---++--+-+---++-+++\\ 
   | ||| | |    |  |||| |  ||   ||| || |  || || |  /+-++-+-++-+++----+--++++---+--+-----+-+-+-+-\\  | | | | |   | ||  |   | |  | |   ||  | |   || |||| 
   | ||| | |    |  |||| |  ||   ||| || |  || || |  || || | || |||/---+--++++---+--+-----+-+-+-+-+--+-+-+-+-+---+-++-\\|   | |  | |   ||  | |   || |||| 
  /+-+++-+-+----+--++++\\|  ||   ||| || |  || || |  || || | || ||||   |  ||||/--+--+-----+-+-+-+-+--+-+-+-+-+---+-++-++---+-+--+-+-\\ ||  | |   || |||| 
 /++-+++-+-+----+--++++++--++---+++-++-+--++-++-+--++-++-+-++-++++---+--+++++--+--+-----+-+-+-+-+--+-+-+\\| |   | || ||   | |  | | | ||  | |   || |||| 
 ||| ||| | |    |  ||||||  ||   ||| || |/-++-++-+--++-++-+-++-++++---+--+++++--+--+-----+-+-+-+-+--+-+-+++-+--\\| || ||   | |  | | | ||  | |   || |||| 
/+++-+++-+-+---\\|  ||||||  ||   ||| || || || || |  || || |/++-++++---+--+++++--+--+-----+-+-+-+-+--+-+-+++-+--++-++-++---+-+--+-+-+-++--+-+---++\\|||| 
|||| ||| | |   ||  ||||||  ||/--+++-++-++-++-++-+--++-++-++++-++++---+--+++++--+--+-----+-+-+-+-+-\\| | ||| |  || || ||   | |  | | | ||  | |   ||||||| 
|||| ||| | |   ||  |||||| /+++--+++-++-++-++-++-+--++-++-++++-++++---+--+++++--+--+-----+-+-+-+-+-++-+-+++-+--++-++\\||   | |  | | | ||  | |   ||||||| 
|||| ||| | |   ||  |||||| ||||  ||| || ||/++-++-+--++-++-++++-++++---+--+++++--+--+-----+-+-+-+-+-++-+-+++-+--++-+++++---+-+--+-+-+-++--+-+\\  ||||||| 
|||| ||| | |   ||  |||||| ||||  ||| || ||||| || |  || || |||| ||||   |  |||||  |  |     | | | | | || | ||| |  || |||||   | |  | | | ||  | ||  ||||||| 
|||| ||| | |   ||  |||||| ||||  ||| || ||||| || |  || || |||| ||||/--+--+++++--+--+-----+-+-+-+-+-++-+-+++-+--++-+++++---+-+--+-+-+-++\\ | ||  ||||||| 
|||| ||| | |   ||  |||||^ ||||  ||| || ||||| || |  || || |||| |||||  |  ||\\++--+--+-----+-+-+-+-+-++-+-+++-+--++-++++/   | |  | | | ||| | ||  ||||||| 
|||| ||| | |   ||  |||||| ||||  ||| || ||||| || |  || || |||| |||||  |  || ||  |  |     | | | | | || | ||| |  || ||||    | |  | | | ||| | ||  ||||||| 
|||| ||| | |   ||  |||||| ||||  ||| || ||||| || |  || || |||| |||||  |  || ||  |  |     | |/+-+<+-++-+-+++-+--++-++++----+-+--+-+-+\\||| | ||  ||||||| 
|||| ||| | |   ||  |||||| ||||  ||| ||/+++++-++-+--++-++-++++-+++++--+--++-++--+--+\\    | ||| |/+-++-+-+++-+\\ || ||||    | |  | | ||||| | ||  ||||||| 
|||| ||| | | /-++--++++++-++++\\ ||| ||||||||/++-+--++-++-++++-+++++--+--++-++--+--++-\\  | ||| ||| || | ||| || || ||||    | |  | | ||||| | ||  ||||||| 
|||| ||| | | | ||  ||\\+++-+++++-++/ ||||||||||| | /++-++-++++-+++++--+--++-++--+--++-+--+-+++-+++\\|| | ||| || || ||||    | |  | | ||||| | ||  ||||||| 
|||| ||| | | | ||  || ||| ||||| ||  ||||||||||| | ||| || |||| |||||  |  || ||  |  || |  | ||| |||||| | ||| || || ||||    | |  | | ||||| | ||  ||||||| 
|||| ||| | | | ||  || ||| ||||| ||  ||||||||||| | ||| || |||| |||||  |  || \\+--+--++-+--+-+++-++++++-+-+++-++-+/ ||||    | |  | | ||||| | ||  ||||||| 
|||| ||| | | | ||  || ||| ||||| ||  ||||||||||| | ||| || |||| |||||  |  ||  |  |  || |  | ||| |||||| | ||| || |  ||||    | |  | | ||||| | ||  ||||||| 
|||| ||| | | | ||  || |||/+++++-++--+++++++++++-+-+++-++-++++-+++++--+--++--+--+--++-+--+-+++-++++++-+-+++-++-+-\\||||    | |  | | ||||| | ||  ||||||| 
|||| ||| | | | ||  || \\++++++++-+/  ||||||||||| | ||| || |||\\-+++++--+--++--+--+--++-+--+-+++-++++++-+-+++-++-+-+++++----/ |  | | ||||| | ||  ||||||| 
||\\+-+++-+-+-+-++--++--/||||||| |   ||||||||||| | ||| || |||  \\++++--+--++--+--+--++-+--+-+++-++++++-+-+++-++-+-+++++------+--+-+-+++++-+-++--+++/||| 
|| |/+++-+-+-+\\||  |\\---+++++++-+---+++++++++++-+-+++-++-+++---++++--+--++--+--+--++-+--/ ||| |||||| | ||| || | |||||      |  | | ||||| | ||  ||| ||| 
|| ||||| | | ||||  |    ||||||| |   ||||||||||| | ||| || |||   ||||  |/-++--+--+--++-+\\   ||| |||||| | ||| || | |||||      |  | | ||||| | ||  ||| ||| 
|| |||\\+-+-+-++++--+----+++/||| \\---+++++++++++-+-+++-++-+++---++++--++-++--+--+--++-++---++/ |||||| | ||| || | |||||      |  | | ||||| | ||  ||| ||| 
|| ||\\-+-+-+-++++--+----+++-+++-----+++++++++++-+-+++-+/ |||   |||| /++-++--+--+--++-++---++\\ |||||| | ||| || | |||||      |  | | ||||| | ||  ||| ||| 
|| ||  | | | ||||  |    ||| |||     ||||||||||| | ||| |  |\\+---++++-+++-++--+--+--++-++---+++-++++++-+-+++-++-+-+++++------+--+-+-+++++-+-++--++/ ||| 
|| ||  | | | ||||  |    ||| |||     ||||||||||| | ||| |  | |   ||\\+-+++-++--+--+--++-++---+++-++++++-+-+++-++-+-++++/      \\--+-+-+++++-+-++--+/  ||| 
|| ||  | | | ||||  |    ||| |||     |v||||||||| | ||| |  | |   || | ||| ||  |  |  || ||   ||| |||||| | ||| || | ||||          | | ||||| | ||  |   ||| 
|| ||  | | | ||||  |    ||| |||     ||||||||||| | ||| |  \\-+---++-+-+/| ||  |  |  || ||   ||| |||||| | ||| || | ||||          | | ||||| | ||  |   ||| 
|| ||  |/+-+-++++--+\\   ||| |||     ||||||||||| | ||| |    |   \\+-+-+-+-++--+--+--++-++---+++-++++++-+-/|| || | ||||          | |/+++++-+-++--+-\\ ||| 
|| ||  ||| |/++++--++---+++-+++-----+++++++++++-+-+++-+----+----+-+-+-+-++--+--+--++-++---+++-++++++-+-\\|| || | ||||          | ||||||| | ||  | | ||| 
|| ||  ||| ||||||  ||   ||| |||     ||||||||||| |/+++-+----+----+-+-+-+-++--+--+--++-++-\\/+++-++++++-+-+++-++-+-++++----------+-+++++++-+-++--+-+\\||| 
\\+-++--+++-++++/|  ||   ||| |||     ||||||||||| ||||| |    |    | | | | ||  |  |  ||/++-+++++-++++++-+-+++-++-+-++++----------+-+++++++-+-++\\ | ||||| 
 | ||  ||| |||| |  ||   ||| |||     ||||||||||| ||||| |    |    | | | | ||  |  |  ||||| ||||| |||||| | ||| || | ||||  /-------+-+++++++-+\\||| | ||||| 
 |/++--+++-++++-+--++---+++-+++---\\ ||||||||||| ||||| |   /+----+-+-+-+-++--+--+--+++++-+++++-++++++-+\\||| || | ||||  |       | ||||||| ||||| | ||||| 
 ||v|  ||| |||| |  || /-+++-+++---+-+++++++++++\\||||| |   ||    | | | | ||  |  |  ||||| |||||/++++++-+++++-++-+-++++--+-------+-+++++++-+++++-+\\||||| 
 |||v  ||| |||| |  || | ||\\-+++---+-+++++++++++++++++-+---++----+-+-+-+-++--+--+--+++++-++++++++++++-+++++-++-+-+++/  |       | ||||||| ||||| ||||||| 
 ||||  ||| |||| |  || | ||  |||   |/+++++++++++++++++-+---++----+-+-+-+-++--+--+--+++++-++++++++++++-+++++-++-+-+++---+-------+-+++++++\\||||| ||||||| 
 |||\\--+++-+++/ |  || |/++--+++---+++++++++++++++++++\\|   ||    | | | | ||  |  |  ||||| |||||||\\++++-+++++-+/ | |||   |       | ||||||||||||| ||||||| 
 |||   ||| |||  |  || ||||  |||   |||||\\+++++++++++++++---++----+-+-+-+-++--+--+--+++++-+++++++-++++-+++++-+--+-+++---+-------+-+++++++++++++-+++++/| 
 |||   ||| |||  |  || ||||  |||/--+++++-+++++++++++++++---++----+-+-+-+-++--+--+--+++++-+++++++-++++-+++++\\|  | |||   |       | ||||||||||||| ||||| | 
 |||   ||| |||  |  || |||| /++++--+++++-+++++++++++++++---++----+-+-+-+-++--+--+-\\||||| ||||||| |||| |||||||  | |||   |       | ||||||||||||| ||||| | 
 |||   ||| |||  |  || |||| |||||  ||||| |||||||||||\\+++---++----+-+-+-+-++--+--+-++++++-+++++++-/||| |||||||  | |||   |       | ||||||||||||| ||||| | 
 |||   ||| |||  |  || |||| |||||  ||||| |||||||||||/+++---++----+-+-+-+-++--+--+-++++++-+++++++--+++-+++++++--+-+++---+----\\  | ||||||||||||| ||||| | 
 |||   ||| |||  |  || |||| |||||  ||||| |||||||||||||||   ||    | | | | ||  |  | |||||| |||||||  ||| |||||||  | |||   |    |  | ||||||||||||| ||||| | 
 |||   ||| |||  |  || |||| |||||  ||||| |||||||||||||||   ||    | | | | ||  |  | |||||| |||||||  ||| |||||||  | |||   |    |  | ||||||||||||| ||||| | 
 |||   ||| |||  |  || |||| |||||  ||||| ||||||||||||||\\---++----+-+-+-+-++--+--+-++++++-+++++++--+++-+++++++--+-+++---+----+--/ ||||||||||||| ||||| | 
 |||   ||| |||  |  || |||| |\\+++--+++/| ||||||||||||||    ||    | | | | ||  |  | |\\++++-+++++++--+++-+++++++--+-+++---+----+----/|||||||||||| ||||| | 
 |||   ||| |||/-+--++-++++-+-+++--+++-+-++++++++++++++----++----+-+-+-+-++--+--+-+-++++-+++++++--+++-+++++++--+-+++---+-\\  |     |||||||||||| ||||| | 
 |||   ||| |||| |  || |||| |/+++--+++-+-++++++++++++++----++----+-+-+-+-++--+--+-+-++++-+++++++--+++-+++++++--+-+++---+-+--+---\\ |||||||||||| ||||| | 
 |||   ||| |||| |  || |||| |||||  ||| | ||||||||||||||/---++----+\\| | | ||  |  | | |||| |||||||  ||| |||||||  | |||   | |  |   | |||||||||||| ||||| | 
 |||   ||| ||\\+-+--++-++++-+++/|  ||| |/+++++++++++++++\\  ||    ||| | | ||  |  | | |||| |||||||  ||| |||||||  | |||   | |  |   | |||||||||||| ||||| | 
 |||   ||| || | |  ||/++++-+++-+--+++-++++++++++++++++++--++----+++-+-+-++--+--+-+-++++-+++++++--+++-+++++++--+-+++-\\ | |  |   | |||||||||||| ||||| | 
 |||   ||| || | |  ||||||| ||| |  ||| ||||||||||||||||||  ||    ||| | | |\\--+--+-+-++++-++++++/  ||| |||||||  | ||| v | |  |   | |||||||||||| ||||| | 
 |||   ||\\-++-+-+--+++++++-+++-+--+++-++++++++++++++++++--++----+++-+-+-+---+--+-+-++++-++++++---++/ |||||||  | |||/+-+-+--+---+-++++++++++++-+++++\\| 
 |||   || /++-+-+--+++++++-+++\\|  |\\+-++++++++++++++++++--++----+++-+-+-+---+--+-+-++++-++++++---++--+++++++--+-+++++-+-+--+---+-++++++/||||| ||||||| 
 |||   || ||| | |  ||||||| |||||  | | |||||||||||\\++++++--++----+++-+-+-+---+--+-+-++++-/||v||   ||  |||||||  | ||||| | |  |   | |||||| ||||| ||||||| 
 |||   || ||| | |  ||||||| |||||  | | ||||||||||| ||\\+++--++----+++-+-+-/   |  | | ||||  |\\+++---++--+++++++--+-+++++-+-+--+---+-+++/|| ||||| ||||||| 
 \\++---++-+++-+-+--+++++++-+++++--+-+-+++++++++++-++-+++--++----+++-+-+-----+--+-+-++++--+-+++---++--+++/|||  | ||||| | |  |   | ||| || ||||| ||||||| 
  ||   || ||| | |  ||||||| |||||  | | ||||\\++++++-++-+++--++----+++-+-+-----+--+-+-++++--+-+++---++--+++-+++--+-+++++-+-+--+---+-+++-/| ||||| ||||||| 
  ||   || |\\+-+-+--+++++++-+++++--+-+-++++-++++++-++-+++--++----+++-+-+-----+--/ | ||||  | |||   ||  ||| |^|  | ||||| | |  |   | |||  | ||||| ||||||| 
  ||  /++-+-+-+-+\\/+++++++-+++++--+-+-++++-++++++-++-+++--++----+++-+-+-----+----+-++++--+-+++---++--+++-+++--+-+++++-+-+\\ |   | |||  | ||||| ||||||| 
  ||  ||| | | | |||||||||| |||||  | | |||| |||||| || |\\+--++----+/| | \\-----+----+-+++/  | \\++---++--+++-+++--+-+++++-+-++-+---+-++/  | ||||| ||||||| 
  ||  |^| | |/+-++++++++++-+++++--+\\| |||| |||||| || | |  ||    | | |       |    | |||   |  ||   ||  ||| |||  | ||||| | || |   | ||   | ||||| ||||||| 
  ||  ||| | ||| |||||||||| ||||\\--+++-++++-++++++-++-+-+--++----+-+-+-------+----+-+++---+--++---++--+++-+/|  | ||||| \\-++-+---+-++---+-+/||| ||||||| 
  ||  ||| | ||| |||||||||| ||||   ||| |||| |||||| || | |  ||/---+-+-+-------+----+-+++---+--++---++-\\||| | |  | |||||   || |   | ||   | | ||| ||||||| 
  ||  ||| | ||| |||||||||| ||||   ||| |||| |||||| || | |  |||   \\-+-+-------+----+-+++---+--++---++-++++-+-+--+-+++++---++-+---+-++---+-+-/|| ||||||| 
  ||  ||| | ||| |||||||||| |\\++---+++-++++-++++++-++-+-+--+++-----+-+-------+----+-+++---+--++---++-++++-+-+--+-+++++---++-+---/ ||   | |  || ||||||| 
  ||  ||| | ||| |||\\++++++-+-++---+++-++++-++++++-++-+-+--+/|     | |       |    | |||   |  ||   || |||| | |  | |||||   || |     ||   | |  || ||||||| 
  ||  |\\+-+-+++-+++-++++++-+-++---+++-++++-++++++-++-+-+--+-+-----+-+-------+----+-+++---+--++---++-++++-+-+--+-+/|||   || |     ||   | |  || ||||||| 
  ||  | | | ||| ||| |||||| | ||   ||| |||| |||||\\-++-+-+--+-+--<--+-+-------+----+-+++---+--++---++-++++-+-+--+-+-/||   || |     ||   | |  || ||||||| 
  ||  | | | ||| ||| |||||| | ||   ||| \\+++-+++++--++-+-+--+-+-----+-+-------+----+-/||   |  ||   || |||| | |  | |  ||   || |     ||   | |  || ||||||| 
  ||  | | | |||/+++-++++++\\| ||   |||  |\\+-+++++--++-+-+--+-+-----+-+-------+----+--++---+--++---++-++++-+-+--/ |  ||   || |     ||   | |  || ||||||| 
  ||  \\-+-+-+++++/| ||||\\+++-++---+++--+-+-++/||  || | |  | |     | |       |    |  ||   |  ||   || |||| | |    |  ||   || |     ||   | |  || ||||||| 
  ||    | | ||||| | |||| ||| ||   |||  | | |\\-++--++-+-+--+-+-----+-+-------+----+--+/   |  ||   || |||| | |    |  ||   || |     ||   | |  || ||||||| 
  \\+----+-+-+++++-+>++++-+++-++---/||  | | \\--++--++-+-+--+-+-----+-+-------+----+--+----+--++---++-++++-+-+----+--++---++-+-----++---+-+--++-++++++/ 
   |    | \\-+++++-+-++++-+++-+/    ||  | |    \\+--++-+-+--+-+-----+-+-------+----+--+----+--++---++-++++-+-+----+--++---++-+-----++---+-+--++-++++/|  
   |    |   |||||/+-++++-+++-+-----++--+-+-----+--++-+-+--+-+--\\  | |       \\>---+--+----+--++---++-++++-+-+----+--++---++-+-----+/   | |  || |||| |  
   |    | /-+++++++-++++\\||| |     ||  | |     |  || | |  | |  |  | |            |  |    |  ||   || |||| | \\----+--++---++-+-----+----+-+--++-/||| |  
   |    | | ||||||| |||||||| |     ||/-+-+-----+--++-+-+--+-+--+--+-+------------+--+----+--++---++-++++-+------+--++---++-+\\    |    | |  ||  ||| |  
   |    | | ||||||| |||||||| |     ||| | |     |  || | |  | |  |  | |            |  \\----+--++---++-++++-+------+--++---++-++----+----+-+--+/  ||| |  
   |    | | ||||||| |||||||| |  /--+++-+-+-----+--++-+-+--+-+--+--+-+------------+----\\  |  ||   || |||| |      |  ||   || ||    |    | |  |   ||| |  
   |    | | ||||||| |||||||| |  |  |\\+-+-+-----+--++-+-+--+-+--+--+-+------------+----+--+--++---++-++++-+------+--++---++-++----+----+-/  |   ||| |  
   \\----+-+-+++++++-++++++++-+--+--+-+-+-+-----+--++-+-+--+-+--+--+-+------------+----+--+--++---++-++++-/  /---+--++--\\|| ||    |    |    |   ||| |  
        | | ||||||| |||||||| |  |  | | | |     |  || | |  | |  |  | |            |    |  |  ||   || ||||    |   |/-++--+++-++----+----+--\\ |   ||| |  
        | | ||||||| |||||||| |  |  | | | |   /-+--++-+-+--+-+--+--+-+------------+----+--+--++---++-++++---\\|   || ||  ||| ||    |    |  | |   ||| |  
        | | ||\\++++-++++++++-+--+--+-+-+-+---+-+--++-+-+--+-+--+--+-+------------+----+--+--++---++-++++---++---++-++--+/| ||    |    |  | |   ||| |  
        | | || |||| |||\\++++-+--+--+-+-+-+---+-+--++-/ |  | |  |  | |            |    |  |  ||   || ||||   ||   || ||  | | ||    |    |  | |   ||| |  
        | | || |\\++-+++-++++-+--+--+-+-+-+---+-+--++---+--+-+--+--+-+------------+----+--+--++---++-+/||   ||   || ||  | | ||    |    |  | |   ||| |  
        | | || | || ||| |||| |  |  | | | |   | |  ||   |  | |  |  | |            |    |  |  ||   || | ||   ||   || ||  | | ||    |    |  | |   ||| |  
        | | || | || ||| |||| |  |  | | | \\---+-+--++---+--+-+--+--+-+------------+----+--+--++---++-+-++---++---++-++--+-+-++----+----+--+-/   ||| |  
        | | || | \\+-+++-++++-+--+--+-+-+-----+-+--++---+--+-+--/  | |            |    |  |  ||   || | ||   ||   || ||  | | ||    |    |  |     ||| |  
        | | || |  | ||| |||| |  \\--+-+-+-----+-+--++---+--+-+-----+-+------------+----/  |  ||   || | || /-++---++-++--+-+-++----+--\\ |  |     ||| |  
        \\-+-++-+--+-/|| |||| |     | | |     | |  ||   |  | |     | |       /----+-------+--++---++-+-++-+-++-\\ || \\+--+-+-++----+--+-+--+-----+++-/  
          | || |  |  || |||| |     | | \\-----+-+--++---/  | |     | |       |    |       |  ||   || | || | || | ||  |  | | ||    |  | |  |     |||    
          | || |  |  \\+-++++-+-----+-+-------+-+--++------+-+-----+-+-------+----+-------+--++---++-+-++-+-++-+-++--/  | | ||    |  | |  |     |||    
          | || |  |   | |||| |     | \\-------+-+--++------+-+-----+-+-------+----+-------+--++---++-+-++-+-++-+-++-----+-+-+/    |  | |  |     |||    
          | || |  |   | |||| |     |         \\-+--++------+-+-----+-+-------+----+-------+--++---++-+-++-+-/| | ||     | | |     |  | |  |     |||    
          | || |  |   | |\\++-+-----+-----------+--++------+-+-----+-+-------+----+-------+--++---++-+-++-+--+-+-/|     | | |     \\--+-+--+-----+/|    
          | \\+-+--+---+-+-++-+-----+-----------+--++------+-+-----+-+-------+----+-------+--++---++-+-+/ |  \\-+--+-----/ | |        | |  |     | |    
          |  | |  \\---+-+-++-+-----+-----------+--++------+-+-----+-+-------+----+-------+--++---++-+-+--+----+--+-------/ |        | |  |     | |    
          \\--+-+------+-/ || \\-----+-----------+--++------+-+-----+-+-------+----+-------+--++---+/ | |  \\----+--+---------+--------/ |  |     | |    
             | |      |   ||       |           |  ||      \\-+-----+-+-------+----+-------+--++---+--+-/       |  \\---------+----------+--/     | |    
             | |      |   ||       |           |  ||        |     | \\-------+----+-------+--/|   |  |         |            |          |        | |    
             | |      |   ||       |           |  ||        \\-----+---------+----+-------+---+---+--/         |            |          |        | |    
             \\-+------+---++-------/           |  ||              |         |    |       |   |   |            |            |          |        | |    
               |      |   ||                   |  |\\--------------+---------+----+-------+---+---+------------+------------/          |        | |    
               \\------+---/|                   |  |               |         |    |       |   \\---+------------+-----------------------+--------/ |    
                      |    |                   |  |               \\---------+----+-------+-------+------------+---------<-------------/          |    
                      \\----+-------------------/  \\-------------------------+----+-------+-------/            |                                  |    
                           \\------------------------------------------------+----/       \\--------------------+----------------------------------/    
                                                                            \\---------------------------------/                                       `;

const map = [
    []
];
const carts = [];
const map_length = input.match(/[^\n]+\n/)[0].length;

class Cart {
    constructor(x, y, direction) {
        this.x = x;
        this.y = y;
        this.direction = direction;
        this.intersect = 0;
    }
}

for (let i in input) {
    i = parseInt(i);

    if (input.charAt(i) == '\n') {
        map.push([]);
    } else if (input.charAt(i) == '>') {
        map[map.length - 1].push('-');
        carts.push(new Cart(i % map_length, map.length - 1, '>'));
    } else if (input.charAt(i) == '<') {
        map[map.length - 1].push('-');
        carts.push(new Cart(i % map_length, map.length - 1, '<'));
    } else if (input.charAt(i) == '^') {
        map[map.length - 1].push('|');
        carts.push(new Cart(i % map_length, map.length - 1, '^'));
    } else if (input.charAt(i) == 'v') {
        map[map.length - 1].push('|');
        carts.push(new Cart(i % map_length, map.length - 1, 'v'));
    } else {
        map[map.length - 1].push(input.charAt(i));
    }

}


let end = false;

while (!end) {

    carts.sort((a, b) => {
        if (a.x + a.y * (map_length - 1) > b.x + b.y * (map_length - 1)) {
            return 1;
        } else {
            return -1;
        }
    })

    for (let cart of carts) {

        if (cart.direction == '>') {
            cart.x += 1;
        } else if (cart.direction == '<') {
            cart.x -= 1;
        } else if (cart.direction == '^') {
            cart.y -= 1;
        } else {
            cart.y += 1;
        };

        if (map[cart.y][cart.x] == '/') {
 
            if (cart.direction == '>') {
                cart.direction = '^';
            } else if (cart.direction == '<') {
                cart.direction = 'v';
            } else if (cart.direction == '^') {
                cart.direction = '>';
            } else {
                cart.direction = '<';
            }

        } else if (map[cart.y][cart.x] == '\\') {

            if (cart.direction == '>') {
                cart.direction = 'v';
            } else if (cart.direction == '<') {
                cart.direction = '^';
            } else if (cart.direction == '^') {
                cart.direction = '<';
            } else {
                cart.direction = '>';
            }

        }

        if (map[cart.y][cart.x] == '+') {

            cart.direction = setDirection(cart.direction, cart.intersect);

            if (cart.intersect == 2) {
                cart.intersect = 0;
            } else {
                cart.intersect++;
            }

        }

        for (let i of carts) {

            let match = 0;

            for (let j of carts) {

                if (i.x == j.x && i.y == j.y) {
                    match++;
                }

                if (match == 2) {
                    console.log([i.x, i.y])
                    end = true;
                    break;
                }

            }

            if (end) {
                break;
            }

        }

        if (end) {
            break;
        }

    }

}